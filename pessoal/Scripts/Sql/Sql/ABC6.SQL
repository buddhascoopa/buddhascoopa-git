rem DELETE SYS.PLAN_TABLE WHERE STATEMENT_ID='ABC6';
rem COMMIT;
rem EXPLAIN PLAN SET STATEMENT_ID='ABC6' INTO SYS.PLAN_TABLE FOR
SELECT INTERFACE_LINE_ID,'Flexfield da Transação duplicado',
INTERFACE_LINE_ATTRIBUTE1||'.'||INTERFACE_LINE_ATTRIBUTE2||'.'||INTERFACE_LINE_ATTRIBUTE3||'.'||INTERFACE_LINE_ATTRIBUTE4||'.'||INTERFACE_LINE_ATTRIBUTE5||'.'||INTERFACE_LINE_ATTRIBUTE6||'.'||INTERFACE_LINE_ATTRIBUTE7
FROM   apps.RA_INTERFACE_LINES IL
WHERE  IL.REQUEST_ID = 87322
AND    IL.INTERFACE_LINE_CONTEXT = 'ORDER ENTRY'
AND (EXISTS
      (SELECT 'X'
       FROM   apps.RA_CUSTOMER_TRX_LINES  TL
            WHERE  IL.INTERFACE_LINE_CONTEXT = TL.INTERFACE_LINE_CONTEXT 
       AND IL.INTERFACE_LINE_ATTRIBUTE1 = TL.INTERFACE_LINE_ATTRIBUTE1
       AND IL.INTERFACE_LINE_ATTRIBUTE2 = TL.INTERFACE_LINE_ATTRIBUTE2
       AND IL.INTERFACE_LINE_ATTRIBUTE3 = TL.INTERFACE_LINE_ATTRIBUTE3
       AND IL.INTERFACE_LINE_ATTRIBUTE4 = TL.INTERFACE_LINE_ATTRIBUTE4
       AND IL.INTERFACE_LINE_ATTRIBUTE5 = TL.INTERFACE_LINE_ATTRIBUTE5
       AND IL.INTERFACE_LINE_ATTRIBUTE6 = TL.INTERFACE_LINE_ATTRIBUTE6
       AND IL.INTERFACE_LINE_ATTRIBUTE7 = TL.INTERFACE_LINE_ATTRIBUTE7
      )
OR     EXISTS
      (SELECT 'X'
       FROM   apps.RA_INTERFACE_LINES L
       WHERE  L.ROWID != IL.ROWID
       AND    L.INTERFACE_LINE_CONTEXT = IL.INTERFACE_LINE_CONTEXT
       AND L.INTERFACE_LINE_ATTRIBUTE1 = IL.INTERFACE_LINE_ATTRIBUTE1
       AND L.INTERFACE_LINE_ATTRIBUTE2 = IL.INTERFACE_LINE_ATTRIBUTE2
       AND L.INTERFACE_LINE_ATTRIBUTE3 = IL.INTERFACE_LINE_ATTRIBUTE3
       AND L.INTERFACE_LINE_ATTRIBUTE4 = IL.INTERFACE_LINE_ATTRIBUTE4
       AND L.INTERFACE_LINE_ATTRIBUTE5 = IL.INTERFACE_LINE_ATTRIBUTE5
       AND L.INTERFACE_LINE_ATTRIBUTE6 = IL.INTERFACE_LINE_ATTRIBUTE6
       AND L.INTERFACE_LINE_ATTRIBUTE7 = IL.INTERFACE_LINE_ATTRIBUTE7
      ))
-- AND    rownum=1
/
col options for a15
col operation for a50
col linhas for a15
select lpad('.',2*(level-1))||operation operation,
       options,
       object_name
--       DECODE(id,0,'Custo = '||position,cardinality) Linhas
from sys.plan_table
start with id = 0 and statement_id = 'ABC6'
connect by prior id = parent_id and statement_id = 'ABC6'
/
